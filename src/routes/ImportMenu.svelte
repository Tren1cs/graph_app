<script lang="ts">
    import LanguageSelection from './LanguageSelection.svelte';

    import { buttonVariants } from "$lib/components/ui/button/index.js";

    import Button from "$lib/components/ui/button/button.svelte";
    import { ArrowDownToLine } from 'lucide-svelte';
    import * as Dialog from "$lib/components/ui/dialog";
    import * as Tabs from "$lib/components/ui/tabs";

    import { Textarea } from "$lib/components/ui/textarea/index.js";

    let { input = $bindable(""), input_type = $bindable("code"), lang = $bindable(""), ...props } = $props();
</script>

<Dialog.Root>
    <Dialog.Trigger class={buttonVariants({ variant: "outline" }) + " mr-2"}><ArrowDownToLine class="mr-2 h-6 w-6"/>–ò–º–ø–æ—Ä—Ç</Dialog.Trigger>
    <Dialog.Content>
        <Dialog.Header>
            <Dialog.Title class="mb-4">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ</Dialog.Title>

            <Dialog.Description>
                <Tabs.Root value="code" class="w-full min-h-[220px]">
                    <Tabs.List class="w-full">
                        <Tabs.Trigger value="code" class="w-full" onfocus={() => input_type = "code"}>–ò–∑  –∫–æ–¥–∞</Tabs.Trigger>
                        <Tabs.Trigger value="list" class="w-full" onfocus={() => input_type = "list"}>–ò–∑ —Å–ø–∏—Å–∫–∞ —Ä—ë–±–µ—Ä</Tabs.Trigger>
                        <Tabs.Trigger value="matrix" class="w-full" onfocus={() => input_type = "matrix"}>–ò–∑ –º–∞—Ç—Ä–∏—Ü—ã —Å–º–µ–∂–Ω–æ—Å—Ç–∏</Tabs.Trigger>
                    </Tabs.List>

                    <Tabs.Content value="code">
                        <LanguageSelection bind:value={lang}/>
                        <Textarea placeholder="üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöß" class="mb-2"/>

                        <Dialog.Close class="w-full ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center
                            whitespace-nowrap rounded-md text-sm font-medium transition-colors
                            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none
                            disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90
                            h-10 px-4 py-2">
                            <ArrowDownToLine class="mr-2 h-6 w-6"/>–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ
                        </Dialog.Close>
                    </Tabs.Content>
                        
                    <Tabs.Content value="list">
                        <script>input_type = "list"</script>
                        <Textarea placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä—ë–±–µ—Ä" class="mb-2 min-h-[128px]" bind:value={input}/>
                        <Dialog.Close on:click class="w-full ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center
                            whitespace-nowrap rounded-md text-sm font-medium transition-colors
                            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none
                            disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90
                            h-10 px-4 py-2">
                            <ArrowDownToLine class="mr-2 h-6 w-6"/>–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ
                        </Dialog.Close>
                    </Tabs.Content>

                    <Tabs.Content value="matrix">
                        <script>input_type = "list"</script>
                        <Textarea placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –º–∞—Ç—Ä–∏—Ü—É —Å–º–µ–∂–Ω–æ—Å—Ç–∏" class="mb-2 min-h-[128px]" bind:value={input}/>
                        <Dialog.Close on:click class="w-full ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center
                            whitespace-nowrap rounded-md text-sm font-medium transition-colors
                            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none
                            disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90
                            h-10 px-4 py-2">
                            <ArrowDownToLine class="mr-2 h-6 w-6"/>–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ
                        </Dialog.Close>
                    </Tabs.Content>
                </Tabs.Root>
            </Dialog.Description>
        </Dialog.Header>
    </Dialog.Content>
</Dialog.Root>

